<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Charlton Pest Control | Public Information & Services</title>

    <!-- Fonts: Public Sans (Government/Civic feel) and Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Public+Sans:wght@400;600;700&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- GSAP & Plugins -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/TextPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/MotionPathPlugin.min.js"></script>

    <!-- Three.js for 3D bee model -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
        }
    }
    </script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- React 18 -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind Config for Council Colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        council: {
                            50: '#faf8f3',
                            100: '#f5f1e8',
                            600: '#cfaf6a', // Primary Gold
                            800: '#a88850', // Deep Gold
                            900: '#8b6f3f',
                        },
                        sage: {
                            100: '#ecfccb',
                            500: '#84cc16',
                            700: '#4d7c0f', // Official Green
                        },
                        amber: {
                            100: '#fef3c7',
                            600: '#d97706', // Advisory/Warning
                        },
                        paper: '#fafafa',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Public Sans', 'sans-serif'],
                    },
                    backgroundImage: {
                        'grain': "url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.65%22 numOctaves=%223%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22 opacity=%220.05%22/%3E%3C/svg%3E')",
                    }
                }
            }
        }
    </script>

    <style>
        /* Base Styles & Resets */
        body {
            background-color: #fafafa;
            color: #1f2937;
            overflow-x: hidden;
            font-feature-settings: "cv11", "ss01";
            -webkit-font-smoothing: antialiased;
        }

        /* Subtle Grain Overlay */
        .noise-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            background-image: url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.8%22 numOctaves=%223%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22 opacity=%220.04%22/%3E%3C/svg%3E');
        }

        /* Pest House SVG Diagram - styles are inline in the SVG */
        .pest-house-svg {
            max-width: 400px;
            width: 100%;
            height: auto;
        }

        /* Marker animation transforms need to use transform-origin */
        .pest-house-svg .marker-dot {
            transform-origin: center;
        }

        .pest-house-svg .marker-dot-outline {
            transform-origin: center;
        }

        /* Utility Classes */
        .section-label {
            font-family: 'Public Sans', sans-serif;
            font-size: 0.75rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: #64748b;
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: block;
        }

        .council-card {
            background: white;
            border: 1px solid #e2e8f0;
            border-top: 4px solid #cfaf6a; /* Top accent - Gold */
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .council-card:hover {
            border-color: #cbd5e1;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }

        /* Timeline */
        .timeline-line {
            width: 2px;
            background-color: #e2e8f0;
            position: absolute;
            top: 0;
            bottom: 0;
            left: 15px; /* Adjust based on icon size */
        }

        .timeline-progress {
            width: 2px;
            background-color: #cfaf6a;
            position: absolute;
            top: 0;
            left: 15px;
            height: 0%;
        }

        /* Motion Path Process Styles */
        .process-main {
            position: relative;
        }

        .process-container {
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Start point - centered top */
        .process-container.initial {
            left: 50%;
            top: 5%;
            transform: translateX(-50%);
        }

        /* Step positions down the page */
        .process-container.second {
            left: 15%;
            top: 30%;
        }

        .process-container.third {
            right: 15%;
            top: 55%;
        }

        .process-container.fourth {
            left: 20%;
            top: 85%;
        }

        .process-icon-box {
            width: 320px;
            height: 320px;
            z-index: 10;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #bee-canvas {
            width: 100% !important;
            height: 100% !important;
            display: block;
        }

        .process-marker {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="font-sans antialiased selection:bg-council-100 selection:text-council-900">

    <div class="noise-overlay"></div>

    <!-- INTRO ANIMATION OVERLAY -->
    <!-- BLUEPRINT SCAN INTRO -->
    <div id="intro-overlay" class="fixed inset-0 z-[100] bg-council-50 flex flex-col items-center justify-center">
        <!-- Visualization Area -->
        <div class="relative w-72 h-72 border border-council-200/50 bg-white/50 backdrop-blur-sm shadow-sm rounded-sm overflow-hidden mb-8">

             <!-- Grid Lines (SVG) -->
             <svg class="absolute inset-0 w-full h-full" viewBox="0 0 200 200" fill="none" stroke="currentColor" stroke-width="1">
                <defs>
                    <pattern id="grid-pattern" width="40" height="40" patternUnits="userSpaceOnUse">
                        <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#e0f2fe" stroke-width="1"/>
                    </pattern>
                </defs>
                <rect width="100%" height="100%" fill="url(#grid-pattern)" />

                <!-- Central Target -->
                <circle cx="100" cy="100" r="30" class="text-council-200" stroke-dasharray="4 4" />
                <line x1="100" y1="20" x2="100" y2="180" class="text-council-200" stroke-width="0.5" />
                <line x1="20" y1="100" x2="180" y2="100" class="text-council-200" stroke-width="0.5" />
             </svg>

             <!-- Logo (Fades in during scan) -->
             <div class="absolute inset-0 flex items-center justify-center p-20">
                <img id="intro-logo" src="cpc-logo.png" alt="Charlton Pest Control" class="w-20 h-20 opacity-0" />
             </div>

             <!-- Scanning Bar (Moves across) -->
             <div id="intro-scanner" class="absolute top-0 bottom-0 w-[2px] bg-council-500 shadow-[0_0_15px_2px_rgba(8,145,178,0.4)] left-0 opacity-0"></div>

             <!-- Status Badge (Pops in) -->
             <div id="intro-badge" class="absolute bottom-4 right-4 bg-council-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-md opacity-0 scale-90">
                 SECURE
             </div>
        </div>

        <!-- Text / Loader -->
        <div class="w-64">
            <div class="flex justify-between items-end mb-2">
                <span id="intro-status-text" class="text-[10px] uppercase font-bold tracking-widest text-council-600">Scanning Area...</span>
                <span id="intro-percent" class="text-[10px] font-mono text-gray-400">0%</span>
            </div>
            <div class="h-0.5 w-full bg-council-200 rounded-full overflow-hidden">
                <div id="intro-progress-bar" class="h-full bg-council-600 w-0"></div>
            </div>
        </div>
    </div>

    <!-- Sticky Nav -->
    <nav class="fixed w-full z-50 bg-white/95 backdrop-blur-sm border-b border-gray-200 shadow-sm opacity-0" id="main-nav">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <img src="cpc-logo.png" alt="Charlton Pest Control" class="w-10 h-10">
                <h1 class="font-display font-bold text-xl leading-tight text-gray-900 tracking-tight">Charlton Pest Control</h1>
            </div>
            <a href="#contact" class="hidden md:inline-flex items-center gap-2 bg-council-50 text-council-800 px-4 py-2 text-sm font-medium border border-council-200 rounded-sm hover:bg-council-100 transition-colors">
                <i data-lucide="phone" class="w-4 h-4"></i>
                020 7946 0123
            </a>
        </div>
    </nav>

    <main class="pt-20">

        <!-- SECTION 01: HERO -->
        <section id="hero" class="relative max-w-7xl mx-auto px-6 pt-4 pb-12 md:pt-8 md:pb-16 min-h-[90vh] flex items-center">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12 items-center w-full">
                <!-- Left Column: Text Content -->
                <div class="flex flex-col justify-center order-1 md:order-1">
                    <span class="section-label opacity-0 hero-anim">Official Service Guide</span>
                    <h2 class="font-display text-4xl md:text-5xl font-bold text-gray-900 mb-6 max-w-2xl leading-tight opacity-0 hero-anim">
                        Pest control services for homes and businesses in Charlton.
                    </h2>
                    <div class="h-1 w-0 bg-council-600 mb-6 hero-line"></div>
                    <p class="text-xl text-gray-600 max-w-xl leading-relaxed opacity-0 hero-anim">
                        Providing professional advice, inspection, and safe treatment for common UK pests. We prioritize public health and environmental safety.
                    </p>
                    <div class="mt-8 flex gap-4 opacity-0 hero-anim">
                        <a href="#contact" class="inline-flex items-center gap-2 text-council-800 font-medium hover:text-council-600 transition-colors border-b border-council-800 pb-0.5">
                            Contact us now <i data-lucide="arrow-right" class="w-4 h-4"></i>
                        </a>
                    </div>
                </div>

                <!-- Right Column: Mobile App Animation -->
                <div id="phone-container" class="flex items-center justify-center order-2 md:order-2 opacity-0 hero-anim-phone py-4">
                    <div id="mobile-app-root" class="w-full flex justify-center items-center"></div>
                </div>
            </div>
        </section>

        <!-- SECTION 02: COMMON UK PESTS -->
        <section id="common-pests" class="bg-white border-y border-gray-200 py-16">
            <div class="max-w-5xl mx-auto px-6">
                <div class="mb-10">
                    <span class="section-label">Identification Guide</span>
                    <h3 class="font-display text-2xl font-bold text-gray-800">Common UK Pests</h3>
                    <p class="text-gray-600 mt-2 max-w-2xl">Select a pest below to understand potential risks and activity seasons.</p>
                </div>

                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <!-- Pest Item 1 -->
                    <div class="pest-card group bg-gray-50 border border-gray-200 p-6 rounded-sm hover:border-council-300 transition-all cursor-default">
                        <div class="flex justify-between items-start mb-4">
                            <i data-lucide="rat" class="w-8 h-8 text-gray-400 group-hover:text-council-600 transition-colors"></i>
                            <span class="bg-gray-200 text-gray-600 text-[10px] px-2 py-1 rounded-sm uppercase font-bold">All Year</span>
                        </div>
                        <h4 class="font-bold text-gray-900">Rats</h4>
                        <div class="h-0 overflow-hidden group-hover:h-auto group-hover:mt-3 transition-all duration-300">
                            <p class="text-sm text-gray-600 leading-snug pt-3 border-t border-gray-200">
                                Found in drains/voids. Carry Weil's disease. Urgent treatment recommended.
                            </p>
                        </div>
                    </div>

                    <!-- Pest Item 2 -->
                    <div class="pest-card group bg-gray-50 border border-gray-200 p-6 rounded-sm hover:border-council-300 transition-all cursor-default">
                        <div class="flex justify-between items-start mb-4">
                            <i data-lucide="mouse-pointer-2" class="w-8 h-8 text-gray-400 group-hover:text-council-600 transition-colors"></i> <!-- Used generic pointer as abstract mouse -->
                            <span class="bg-gray-200 text-gray-600 text-[10px] px-2 py-1 rounded-sm uppercase font-bold">Winter</span>
                        </div>
                        <h4 class="font-bold text-gray-900">Mice</h4>
                        <div class="h-0 overflow-hidden group-hover:h-auto group-hover:mt-3 transition-all duration-300">
                            <p class="text-sm text-gray-600 leading-snug pt-3 border-t border-gray-200">
                                Enter through tiny gaps. Chew wiring. Food contamination risk.
                            </p>
                        </div>
                    </div>

                    <!-- Pest Item 3 -->
                    <div class="pest-card group bg-gray-50 border border-gray-200 p-6 rounded-sm hover:border-council-300 transition-all cursor-default">
                        <div class="flex justify-between items-start mb-4">
                            <i data-lucide="bug" class="w-8 h-8 text-gray-400 group-hover:text-council-600 transition-colors"></i>
                            <span class="bg-amber-100 text-amber-800 text-[10px] px-2 py-1 rounded-sm uppercase font-bold">Summer</span>
                        </div>
                        <h4 class="font-bold text-gray-900">Wasps</h4>
                        <div class="h-0 overflow-hidden group-hover:h-auto group-hover:mt-3 transition-all duration-300">
                            <p class="text-sm text-gray-600 leading-snug pt-3 border-t border-gray-200">
                                Aggressive if disturbed. Nests often in lofts or wall cavities.
                            </p>
                        </div>
                    </div>

                    <!-- Pest Item 4 -->
                    <div class="pest-card group bg-gray-50 border border-gray-200 p-6 rounded-sm hover:border-council-300 transition-all cursor-default">
                        <div class="flex justify-between items-start mb-4">
                            <i data-lucide="bed" class="w-8 h-8 text-gray-400 group-hover:text-council-600 transition-colors"></i>
                            <span class="bg-gray-200 text-gray-600 text-[10px] px-2 py-1 rounded-sm uppercase font-bold">All Year</span>
                        </div>
                        <h4 class="font-bold text-gray-900">Bed Bugs</h4>
                        <div class="h-0 overflow-hidden group-hover:h-auto group-hover:mt-3 transition-all duration-300">
                            <p class="text-sm text-gray-600 leading-snug pt-3 border-t border-gray-200">
                                Feed on blood. Cause itchy bites. Require professional heat/chemical treatment.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 03: WHERE PESTS ARE FOUND (PINNED) -->
        <section id="house-section" class="py-12 bg-council-50 overflow-hidden">
            <div class="max-w-5xl mx-auto px-6 flex flex-col md:flex-row items-center gap-12 min-h-[500px]">

                <!-- Left: House Diagram (SVG Cross-Section) -->
                <div class="w-full md:w-1/2 hidden md:flex justify-center order-2 md:order-1 relative">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 320" class="pest-house-svg w-full max-w-[400px]" style="filter: drop-shadow(0 4px 12px rgba(0,0,0,0.1));">
                        <defs>
                            <style>
                                .area-highlight { fill: #cfaf6a; transition: opacity 0.5s ease-out; pointer-events: none; }
                                .house-wall { fill: #f1f5f9; stroke: #cbd5e1; stroke-width: 3; }
                                .house-roof { fill: #cbd5e1; }
                                .house-roof-inner { fill: #e2e8f0; }
                                .floor-line { stroke: #cbd5e1; stroke-width: 2; stroke-dasharray: 8,4; }
                                .window { fill: #bfdbfe; stroke: #94a3b8; stroke-width: 2; }
                                .door { fill: #a78bfa; stroke: #7c3aed; stroke-width: 2; }
                                .chimney { fill: #d4d4d8; stroke: #a1a1aa; stroke-width: 2; }
                                .basement { fill: #e7e5e4; stroke: #a8a29e; stroke-width: 2; }
                                .detail { fill: none; stroke: #94a3b8; stroke-width: 1.5; }
                                .insulation { fill: #fef3c7; opacity: 0.6; }
                                .pipe { stroke: #6b7280; stroke-width: 3; fill: none; stroke-linecap: round; }
                                .furniture { fill: #d1d5db; stroke: #9ca3af; stroke-width: 1.5; }
                                .bed { fill: #e0e7ff; stroke: #a5b4fc; stroke-width: 1.5; }
                                .svg-label { font-family: 'Inter', sans-serif; font-size: 8px; fill: #6b7280; }
                            </style>
                        </defs>

                        <!-- CHIMNEY -->
                        <rect class="chimney" x="280" y="25" width="25" height="50"/>
                        <rect fill="#525252" x="277" y="22" width="31" height="6" rx="1"/>

                        <!-- ROOF -->
                        <polygon class="house-roof" points="200,20 60,95 340,95"/>
                        <polygon class="house-roof-inner" points="200,32 80,95 320,95"/>

                        <!-- LOFT INSULATION (visible through cutaway) -->
                        <path class="insulation" d="M90,95 Q120,85 150,95 Q180,85 200,95 Q230,85 260,95 Q290,85 310,95 L310,110 L90,110 Z"/>

                        <!-- MAIN WALLS -->
                        <rect class="house-wall" x="75" y="95" width="250" height="155"/>

                        <!-- FLOOR DIVIDER - Ground Floor / First Floor -->
                        <line class="floor-line" x1="75" y1="170" x2="325" y2="170"/>

                        <!-- BASEMENT/CRAWL SPACE -->
                        <rect class="basement" x="75" y="250" width="250" height="45"/>

                        <!-- WINDOWS -->
                        <!-- First Floor Left Window -->
                        <rect class="window" x="100" y="115" width="35" height="40"/>
                        <line class="detail" x1="117.5" y1="115" x2="117.5" y2="155"/>
                        <line class="detail" x1="100" y1="135" x2="135" y2="135"/>

                        <!-- First Floor Right Window -->
                        <rect class="window" x="265" y="115" width="35" height="40"/>
                        <line class="detail" x1="282.5" y1="115" x2="282.5" y2="155"/>
                        <line class="detail" x1="265" y1="135" x2="300" y2="135"/>

                        <!-- Ground Floor Left Window (Kitchen) -->
                        <rect class="window" x="100" y="190" width="35" height="40"/>
                        <line class="detail" x1="117.5" y1="190" x2="117.5" y2="230"/>
                        <line class="detail" x1="100" y1="210" x2="135" y2="210"/>

                        <!-- Front Door -->
                        <rect class="door" x="260" y="195" width="40" height="55"/>
                        <circle fill="#fbbf24" cx="290" cy="225" r="3"/>

                        <!-- BED (First Floor - Bedroom) -->
                        <rect class="bed" x="155" y="130" width="55" height="30"/>
                        <rect fill="#c7d2fe" x="155" y="130" width="55" height="8"/>

                        <!-- KITCHEN DETAILS (Ground Floor) -->
                        <!-- Counter/Cabinet -->
                        <rect class="furniture" x="150" y="195" width="50" height="35"/>
                        <!-- Sink basin -->
                        <rect fill="#93c5fd" x="160" y="200" width="30" height="15" rx="2"/>
                        <!-- Pipe under sink -->
                        <path class="pipe" d="M175,215 L175,230 Q175,240 185,240 L200,240"/>

                        <!-- WALL CAVITY (shown as cutaway) -->
                        <rect fill="#fef9c3" opacity="0.5" x="322" y="120" width="8" height="80"/>

                        <!-- SKIRTING BOARD DETAIL -->
                        <rect fill="#9ca3af" x="75" y="245" width="250" height="5"/>

                        <!-- FLOORBOARD LINES -->
                        <line stroke="#d1d5db" stroke-width="1" x1="85" y1="250" x2="315" y2="250"/>

                        <!-- ========================================= -->
                        <!-- HIGHLIGHT AREAS (activated on scroll) -->
                        <!-- ========================================= -->

                        <!-- 1. LOFT AREA HIGHLIGHT -->
                        <path id="highlight-loft" class="area-highlight" d="M60,95 L340,95 L320,95 L200,32 L80,95 L60,95 L60,110 L340,110 L340,95 Z" opacity="0"/>

                        <!-- 2. KITCHEN AREA HIGHLIGHT -->
                        <rect id="highlight-kitchen" class="area-highlight" x="145" y="190" width="60" height="60" rx="4" opacity="0"/>

                        <!-- 3. WALL CAVITY HIGHLIGHT -->
                        <rect id="highlight-wall" class="area-highlight" x="318" y="115" width="12" height="135" rx="2" opacity="0"/>
                    </svg>
                </div>

                <!-- Right: Text Content (Scrolled) -->
                <div class="w-full md:w-1/2 order-1 md:order-2">
                    <span class="section-label">Property Inspection</span>
                    <h3 class="font-display text-2xl font-bold text-gray-800 mb-8">Where pests hide</h3>

                    <div class="space-y-16 py-12" id="house-text-container">
                        <!-- Step 1 -->
                        <div class="house-step opacity-30 transition-opacity duration-500" data-target="loft">
                            <h4 class="text-xl font-bold text-council-800 mb-2">1. The Loft & Roof</h4>
                            <p class="text-gray-600">
                                Primary entry for squirrels, wasps, and birds. Check for light entering through tiles and listen for scratching noises at night.
                            </p>
                        </div>

                        <!-- Step 2 -->
                        <div class="house-step opacity-30 transition-opacity duration-500" data-target="kitchen">
                            <h4 class="text-xl font-bold text-council-800 mb-2">2. Kitchen & Waste</h4>
                            <p class="text-gray-600">
                                Crumbs and open bins attract mice and ants. Ensure pipework under sinks is sealed tightly against the wall.
                            </p>
                        </div>

                        <!-- Step 3 -->
                        <div class="house-step opacity-30 transition-opacity duration-500" data-target="wall">
                            <h4 class="text-xl font-bold text-council-800 mb-2">3. Wall Cavities</h4>
                            <p class="text-gray-600">
                                Bed bugs and beetles thrive in cracks. Rats can travel vertically through wall voids if brickwork is compromised.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 04: SIGNS TO LOOK OUT FOR -->
        <!-- SECTION 04: EARLY DETECTION (REDESIGNED) -->
        <section id="detection-section" class="py-24 bg-white overflow-hidden relative">
            <!-- Background Pulse Effect (Subtle) -->
            <div class="absolute inset-0 flex items-center justify-center pointer-events-none opacity-20">
                <div class="w-[600px] h-[600px] border border-council-100 rounded-full radar-ring"></div>
                <div class="w-[400px] h-[400px] border border-council-100 rounded-full radar-ring absolute"></div>
            </div>

            <div class="max-w-5xl mx-auto px-6 relative z-10">
                <div class="text-center mb-16">
                    <span class="section-label block mb-2">Early Detection</span>
                    <h3 class="font-display text-3xl font-bold text-gray-900">Signs of Infestation</h3>
                    <p class="text-gray-600 mt-4 max-w-2xl mx-auto">
                        Pests are masters of concealment. Look for these four key indicators to catch an infestation early.
                    </p>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Card 1: Droppings -->
                    <div class="detection-card bg-gray-50 border border-gray-100 p-8 rounded-sm relative overflow-hidden group hover:border-council-200 transition-colors opacity-0 translate-y-8">
                        <div class="absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity">
                            <span class="bg-amber-100 text-amber-700 text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded-sm">Alert</span>
                        </div>
                        <div class="w-12 h-12 bg-white border border-gray-200 rounded-full flex items-center justify-center mb-6 relative">
                            <div class="absolute inset-0 bg-council-100 rounded-full detection-pulse opacity-0 group-hover:opacity-100 transition-opacity"></div>
                            <i data-lucide="circle-dot" class="w-6 h-6 text-council-600 relative z-10"></i>
                        </div>
                        <h4 class="text-lg font-bold text-gray-900 mb-2">1. Droppings</h4>
                        <p class="text-gray-600 text-sm leading-relaxed">
                            Dark, tapered pellets found in cupboards, lofts, or along skirting boards. Fresh droppings are shiny; old ones are crumbly.
                        </p>
                    </div>

                    <!-- Card 2: Noise -->
                    <div class="detection-card bg-gray-50 border border-gray-100 p-8 rounded-sm relative overflow-hidden group hover:border-council-200 transition-colors opacity-0 translate-y-8">
                        <div class="absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity">
                            <span class="bg-amber-100 text-amber-700 text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded-sm">Alert</span>
                        </div>
                        <div class="w-12 h-12 bg-white border border-gray-200 rounded-full flex items-center justify-center mb-6 relative">
                             <div class="absolute inset-0 bg-council-100 rounded-full detection-pulse opacity-0 group-hover:opacity-100 transition-opacity"></div>
                            <i data-lucide="ear" class="w-6 h-6 text-council-600 relative z-10"></i>
                        </div>
                        <h4 class="text-lg font-bold text-gray-900 mb-2">2. Unusual Noises</h4>
                        <p class="text-gray-600 text-sm leading-relaxed">
                            Scratching, scurrying, or gnawing sounds, particularly at night in lofts or wall cavities, often indicate rodents.
                        </p>
                    </div>

                    <!-- Card 3: Damage -->
                    <div class="detection-card bg-gray-50 border border-gray-100 p-8 rounded-sm relative overflow-hidden group hover:border-council-200 transition-colors opacity-0 translate-y-8">
                        <div class="absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity">
                            <span class="bg-amber-100 text-amber-700 text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded-sm">Alert</span>
                        </div>
                        <div class="w-12 h-12 bg-white border border-gray-200 rounded-full flex items-center justify-center mb-6 relative">
                             <div class="absolute inset-0 bg-council-100 rounded-full detection-pulse opacity-0 group-hover:opacity-100 transition-opacity"></div>
                            <i data-lucide="zap-off" class="w-6 h-6 text-council-600 relative z-10"></i>
                        </div>
                        <h4 class="text-lg font-bold text-gray-900 mb-2">3. Property Damage</h4>
                        <p class="text-gray-600 text-sm leading-relaxed">
                            Look for gnawed wiring, holes in skirting boards, or shredded paper/insulation used for nesting materials.
                        </p>
                    </div>

                    <!-- Card 4: Physical Signs -->
                    <div class="detection-card bg-gray-50 border border-gray-100 p-8 rounded-sm relative overflow-hidden group hover:border-council-200 transition-colors opacity-0 translate-y-8">
                        <div class="absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity">
                            <span class="bg-amber-100 text-amber-700 text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded-sm">Alert</span>
                        </div>
                        <div class="w-12 h-12 bg-white border border-gray-200 rounded-full flex items-center justify-center mb-6 relative">
                             <div class="absolute inset-0 bg-council-100 rounded-full detection-pulse opacity-0 group-hover:opacity-100 transition-opacity"></div>
                            <i data-lucide="search-x" class="w-6 h-6 text-council-600 relative z-10"></i>
                        </div>
                        <h4 class="text-lg font-bold text-gray-900 mb-2">4. Smells & Smears</h4>
                        <p class="text-gray-600 text-sm leading-relaxed">
                            A strong ammonia smell or dark grease marks (smear marks) along walls where rodents brush against surfaces.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 05: PREVENTION ADVICE -->
        <section class="bg-gray-50 py-20 border-t border-gray-200">
            <div class="max-w-5xl mx-auto px-6">
                <span class="section-label">Public Advice</span>
                <h3 class="font-display text-2xl font-bold text-gray-800 mb-10">Prevention Guidelines</h3>

                <div class="grid md:grid-cols-3 gap-6">
                    <!-- Card 1 -->
                    <article class="council-card advice-card opacity-0 translate-y-8">
                        <div class="flex items-center gap-2 mb-3">
                            <i data-lucide="shield" class="text-council-600 w-5 h-5"></i>
                            <h4 class="font-bold text-gray-900">Proofing</h4>
                        </div>
                        <p class="text-sm text-gray-600 leading-relaxed">
                            Seal holes around pipes and vents. Install wire mesh over air bricks. Mice can squeeze through a 6mm gap.
                        </p>
                    </article>

                    <!-- Card 2 -->
                    <article class="council-card advice-card opacity-0 translate-y-8">
                        <div class="flex items-center gap-2 mb-3">
                            <i data-lucide="trash-2" class="text-council-600 w-5 h-5"></i>
                            <h4 class="font-bold text-gray-900">Waste Hygiene</h4>
                        </div>
                        <p class="text-sm text-gray-600 leading-relaxed">
                            Keep bin lids firmly closed. Do not leave pet food out overnight. Compose heaps should be sealed.
                        </p>
                    </article>

                    <!-- Card 3 -->
                    <article class="council-card advice-card opacity-0 translate-y-8">
                        <div class="flex items-center gap-2 mb-3">
                            <i data-lucide="droplets" class="text-council-600 w-5 h-5"></i>
                            <h4 class="font-bold text-gray-900">Moisture Control</h4>
                        </div>
                        <p class="text-sm text-gray-600 leading-relaxed">
                            Fix leaking pipes immediately. Silverfish and woodlice are attracted to damp environments in bathrooms and cellars.
                        </p>
                    </article>
                </div>
            </div>
        </section>

        <!-- SECTION 06: OUR SERVICE PROCESS (MOTION PATH) -->
        <section id="process-section" class="py-12 bg-white overflow-hidden relative">
            <!-- Neural Background Canvas (Light Version) -->
            <canvas id="neural-canvas" class="absolute inset-0 w-full h-full"></canvas>

            <div class="max-w-5xl mx-auto px-6 text-center mb-12 relative z-10">
                <span class="section-label">How we work</span>
                <h3 class="font-display text-3xl font-bold text-gray-800">Our Service Process</h3>
                <p class="text-gray-600 mt-2">Follow our proven three-step approach</p>
            </div>

            <div class="process-main relative z-10" style="height: 300vh;">
                <!-- Moving Icon -->
                <div class="process-container initial">
                    <div class="process-icon-box">
                        <img src="cpc-logo.png" alt="Charlton Pest Control" class="w-32 h-32">
                    </div>
                </div>

                <!-- Step 1: Survey & Risk Assessment -->
                <div class="process-container second">
                    <div class="process-marker bg-white border-2 border-council-600 rounded-lg p-6 max-w-md">
                        <div class="flex items-center gap-3 mb-3">
                            <div class="w-12 h-12 bg-council-100 rounded-full flex items-center justify-center">
                                <i data-lucide="search" class="w-6 h-6 text-council-600"></i>
                            </div>
                            <h4 class="font-display text-xl font-bold text-gray-900">Survey & Risk Assessment</h4>
                        </div>
                        <p class="text-gray-600 text-sm leading-relaxed">
                            A qualified technician visits the property to identify the pest, locate entry points, and assess health and safety risks.
                        </p>
                    </div>
                </div>

                <!-- Step 2: Treatment Plan -->
                <div class="process-container third">
                    <div class="process-marker bg-white border-2 border-council-600 rounded-lg p-6 max-w-md">
                        <div class="flex items-center gap-3 mb-3">
                            <div class="w-12 h-12 bg-council-100 rounded-full flex items-center justify-center">
                                <i data-lucide="clipboard-check" class="w-6 h-6 text-council-600"></i>
                            </div>
                            <h4 class="font-display text-xl font-bold text-gray-900">Treatment Plan</h4>
                        </div>
                        <p class="text-gray-600 text-sm leading-relaxed">
                            We propose a treatment strategy using approved methods. We explain all safety precautions required for children and pets.
                        </p>
                    </div>
                </div>

                <!-- Step 3: Prevention & Monitoring -->
                <div class="process-container fourth">
                    <div class="process-marker bg-white border-2 border-council-600 rounded-lg p-6 max-w-md">
                        <div class="flex items-center gap-3 mb-3">
                            <div class="w-12 h-12 bg-council-100 rounded-full flex items-center justify-center">
                                <i data-lucide="shield-check" class="w-6 h-6 text-council-600"></i>
                            </div>
                            <h4 class="font-display text-xl font-bold text-gray-900">Prevention & Monitoring</h4>
                        </div>
                        <p class="text-gray-600 text-sm leading-relaxed">
                            After treatment, we provide a written report with structural recommendations to prevent future infestations.
                        </p>
                    </div>
                </div>
            </div>

            <div class="spacer-final h-20 relative z-10"></div>
        </section>

        <!-- SECTION 07: WHO WE HELP -->
        <section class="py-20 bg-council-800 text-white">
            <div class="max-w-5xl mx-auto px-6">
                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <div>
                        <span class="text-council-200 text-xs font-bold tracking-widest uppercase mb-2 block">Community Support</span>
                        <h3 class="font-display text-3xl font-bold mb-6">Supporting our community</h3>
                        <p class="text-council-100 leading-relaxed mb-6">
                            Charlton Pest Control works with residents and businesses to maintain high standards of public health.
                        </p>
                        <div class="flex flex-wrap gap-3">
                            <span class="px-3 py-1 border border-council-600 rounded-sm text-sm text-council-100">Homeowners</span>
                            <span class="px-3 py-1 border border-council-600 rounded-sm text-sm text-council-100">Private Tenants</span>
                            <span class="px-3 py-1 border border-council-600 rounded-sm text-sm text-council-100">Landlords</span>
                            <span class="px-3 py-1 border border-council-600 rounded-sm text-sm text-council-100">Local Businesses</span>
                        </div>
                    </div>
                    <div class="bg-council-900/50 p-8 border-l-4 border-council-500 rounded-r-sm">
                        <h4 class="font-bold text-lg mb-4 flex items-center gap-2">
                            <i data-lucide="leaf" class="text-sage-500 w-5 h-5"></i>
                            Environmental Responsibility
                        </h4>
                        <p class="text-sm text-gray-300 leading-relaxed">
                            We use the minimum amount of rodenticide necessary to effectively control pests, strictly adhering to the CRRU (Campaign for Responsible Rodenticide Use) code to protect wildlife and the environment.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 08: CONTACT -->
        <section id="contact" class="py-24 bg-white">
            <div class="max-w-xl mx-auto px-6 text-center">
                <h3 class="font-display text-2xl font-bold text-gray-800 mb-2">Book an Appointment</h3>
                <p class="text-gray-600 mb-8">Fill out the form below or call our team. We aim to respond within 24 hours.</p>

                <form class="text-left space-y-4 bg-gray-50 p-6 border border-gray-200 rounded-sm">
                    <div>
                        <label class="block text-xs font-bold uppercase text-gray-500 mb-1">Full Name</label>
                        <input type="text" class="w-full border border-gray-300 rounded-sm p-3 focus:ring-2 focus:ring-council-600 focus:border-transparent outline-none transition-shadow" placeholder="e.g. John Smith">
                    </div>
                    <div>
                        <label class="block text-xs font-bold uppercase text-gray-500 mb-1">Email</label>
                        <input type="email" class="w-full border border-gray-300 rounded-sm p-3 focus:ring-2 focus:ring-council-600 focus:border-transparent outline-none transition-shadow" placeholder="e.g. john.smith@email.com">
                    </div>
                    <div>
                        <label class="block text-xs font-bold uppercase text-gray-500 mb-1">Contact Number</label>
                        <input type="tel" class="w-full border border-gray-300 rounded-sm p-3 focus:ring-2 focus:ring-council-600 focus:border-transparent outline-none transition-shadow" placeholder="e.g. 07123 456789">
                    </div>
                    <div>
                        <label class="block text-xs font-bold uppercase text-gray-500 mb-1">Postcode</label>
                        <input type="text" class="w-full border border-gray-300 rounded-sm p-3 focus:ring-2 focus:ring-council-600 focus:border-transparent outline-none transition-shadow" placeholder="e.g. CH1 4ER">
                    </div>
                    <div class="relative">
                        <label class="block text-xs font-bold uppercase text-gray-500 mb-1">Pest Issue</label>
                        <select class="w-full border border-gray-300 rounded-sm p-3 pr-10 focus:ring-2 focus:ring-council-600 focus:border-transparent outline-none transition-all bg-white appearance-none cursor-pointer hover:border-council-600 hover:shadow-sm">
                            <option value="">Select pest type...</option>
                            <option value="rats-mice">Rats/Mice</option>
                            <option value="wasps">Wasps</option>
                            <option value="ants">Ants</option>
                            <option value="bed-bugs">Bed Bugs</option>
                            <option value="cockroaches">Cockroaches</option>
                            <option value="other">Other / Unknown</option>
                        </select>
                        <!-- Custom Dropdown Arrow -->
                        <div class="absolute right-3 top-[38px] pointer-events-none">
                            <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </div>
                    </div>
                    <button type="button" class="w-full bg-council-600 hover:bg-council-800 text-white font-bold py-3 px-4 rounded-sm transition-colors flex justify-center items-center gap-2 mt-4">
                        Request Callback <i data-lucide="send" class="w-4 h-4"></i>
                    </button>
                    <p class="text-[10px] text-gray-500 text-center mt-2">
                        Your data is processed in accordance with our privacy policy.
                    </p>
                </form>
            </div>
        </section>

        <!-- FOOTER -->
        <footer class="bg-gray-100 border-t border-gray-200 py-12">
            <div class="max-w-5xl mx-auto px-6 text-center md:text-left flex flex-col md:flex-row justify-between items-center gap-6">
                <div>
                    <h5 class="font-bold text-gray-800">Charlton Pest Control</h5>
                    <p class="text-sm text-gray-500 mt-1">Supporting safe, healthy homes in our community.</p>
                </div>
                <div class="text-xs text-gray-400">
                    &copy; 2024 Charlton Pest Control. All rights reserved.<br>
                    Licensed & Insured.
                </div>
            </div>
        </footer>
    </main>

    <!-- GSAP Animation Logic -->
    <script>
        // Initialize Lucide Icons
        lucide.createIcons();

        // Register GSAP Plugins
        gsap.registerPlugin(ScrollTrigger, TextPlugin, MotionPathPlugin);

        // Helper to setup drawSVG effect without the paid plugin
        function setupPathAnimation(id) {
            const el = document.getElementById(id);
            if (!el) return null;
            const len = el.getTotalLength();
            el.style.strokeDasharray = len;
            el.style.strokeDashoffset = len;
            return el;
        }

        const percentageObj = { value: 0 };

        // --- BLUEPRINT SCAN INTRO ---
        const tlIntro = gsap.timeline({
            defaults: { ease: "power2.inOut" },
            onComplete: () => {
                // Transition to Main Site
                gsap.to("#intro-overlay", {
                    opacity: 0,
                    duration: 0.6,
                    delay: 0.5,
                    onComplete: () => {
                        document.getElementById("intro-overlay").style.display = "none";
                        tlHero.play();
                        gsap.to("#main-nav", { opacity: 1, duration: 0.5 });
                        ScrollTrigger.refresh();
                    }
                });
            }
        });

        tlIntro
            // 1. Scanner Bar sweeps across
            .to("#intro-scanner", { opacity: 1, duration: 0.1 })
            .to("#intro-scanner", { left: "100%", duration: 1.5, ease: "linear" })

            // 2. Logo fades in sync with scan
            .to("#intro-logo", { opacity: 1, duration: 1.5, ease: "linear" }, "<")

            // 3. Percentage counts up
            .to(percentageObj, {
                value: 100,
                duration: 1.5,
                ease: "linear",
                onUpdate: () => {
                    document.getElementById("intro-percent").innerText = Math.round(percentageObj.value) + "%";
                }
            }, "<")
            .to("#intro-progress-bar", { width: "100%", duration: 1.5, ease: "linear" }, "<")

            // 4. Badge Pop
            .to("#intro-badge", { opacity: 1, scale: 1, duration: 0.4, ease: "back.out(1.7)" })
            .to("#intro-status-text", { text: "AREA SECURE", duration: 0.3, ease: "none" }, "<")

            // 5. Short Hold
            .to({}, { duration: 0.3 });


        // --- HERO ANIMATION (Paused initially) ---
        const tlHero = gsap.timeline({ paused: true, defaults: { ease: "power2.out" } });

        tlHero.to(".hero-anim", {
            y: 0,
            opacity: 1,
            duration: 0.8,
            stagger: 0.15,
            delay: 0.2
        })
        .to(".hero-line", {
            width: "80px",
            duration: 0.6
        }, "-=0.6")
        .to("#phone-container", {
            y: 0,
            opacity: 1,
            duration: 0.8,
            onComplete: () => {
                window.dispatchEvent(new CustomEvent('phoneContainerReady'));
            }
        }, 0.2 + (4 * 0.15));

        // --- PEST CARDS STAGGER ---
        gsap.set(".pest-card", { opacity: 0, y: 30 });
        gsap.to(".pest-card", {
            scrollTrigger: {
                trigger: "#common-pests",
                start: "top 80%",
            },
            y: 0,
            opacity: 1,
            duration: 0.6,
            stagger: 0.1,
            ease: "power2.out"
        });

        // --- PINNED HOUSE SECTION ---
        // Pin the section and highlight house areas based on scroll
        const pestAreas = ['loft', 'kitchen', 'wall'];
        const numAreas = pestAreas.length;
        const stepSize = 1 / numAreas; // 0.33 for 3 areas

        ScrollTrigger.create({
            trigger: "#house-section",
            start: "top top",
            end: "+=2000",
            pin: true,
            scrub: 1,
            onUpdate: (self) => {
                const progress = self.progress;

                // Text opacity handling
                const steps = document.querySelectorAll('.house-step');
                steps.forEach((step, index) => {
                    const start = index * stepSize;
                    const end = (index + 1) * stepSize;

                    if (progress >= start && progress < end) {
                        step.style.opacity = '1';
                    } else {
                        step.style.opacity = '0.3';
                    }
                });

                // House area highlight logic
                pestAreas.forEach((area, index) => {
                    const start = index * stepSize;
                    const highlight = document.getElementById(`highlight-${area}`);

                    if (highlight) {
                        if (progress >= start && progress < (start + stepSize)) {
                            // Activate this area highlight
                            highlight.style.opacity = '0.4';
                        } else {
                            // Deactivate this area highlight
                            highlight.style.opacity = '0';
                        }
                    }
                });
            }
        });

        // --- DETECTION SECTION ANIMATION (NEW) ---

        // 1. Radar Ring Pulse Background
        gsap.to(".radar-ring", {
            scale: 1.5,
            opacity: 0,
            duration: 3,
            stagger: 0.5,
            repeat: -1,
            ease: "power1.out"
        });

        // 2. Detection Cards Staggered Entry
        gsap.to(".detection-card", {
            scrollTrigger: {
                trigger: "#detection-section",
                start: "top 70%",
            },
            y: 0,
            opacity: 1,
            duration: 0.8,
            stagger: 0.15,
            ease: "power2.out"
        });

        // 3. Pulse Dot on Hover (Handled via CSS group-hover for performance)
        gsap.to(".detection-pulse", {
            scale: 1.5,
            opacity: 0,
            duration: 1.5,
            repeat: -1,
            ease: "power1.out",
            paused: true
        });

        // --- ADVICE CARDS ---
        gsap.to(".advice-card", {
            scrollTrigger: {
                trigger: ".advice-card",
                start: "top 85%",
            },
            y: 0,
            opacity: 1,
            stagger: 0.2,
            duration: 0.8,
            ease: "power2.out"
        });

        // --- MOTION PATH PROCESS SECTION ---
        function createProcessTimeline() {
            const iconBox = document.querySelector(".process-icon-box");
            if (!iconBox) return;

            const iconBoxRect = iconBox.getBoundingClientRect();

            // All containers except the initial one
            const containers = gsap.utils.toArray(".process-container:not(.initial)");

            // Calculate the points for the motion path
            const points = containers.map((container) => {
                const marker = container.querySelector(".process-marker") || container;
                const rect = marker.getBoundingClientRect();

                return {
                    x: rect.left + rect.width / 2 - (iconBoxRect.left + iconBoxRect.width / 2),
                    y: rect.top + rect.height / 2 - (iconBoxRect.top + iconBoxRect.height / 2)
                };
            });

            // Create the motion path timeline
            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: ".process-container.initial",
                    start: "top center",
                    endTrigger: ".spacer-final",
                    end: "top center",
                    scrub: 1
                }
            });

            tl.to(".process-icon-box", {
                duration: 1,
                ease: "none",
                motionPath: {
                    path: points,
                    curviness: 1.5
                }
            });
        }

        // Run on load and resize
        createProcessTimeline();
        window.addEventListener("resize", createProcessTimeline);

    </script>

    <!-- 3D Bee Model Setup -->

    <!-- Mobile App Animation - React-based implementation -->
    <style>
        /* Phone cursor styles */
        .phone-cursor {
            width: 24px;
            height: 24px;
            background: radial-gradient(circle, rgba(8, 145, 178, 0.8) 0%, rgba(8, 145, 178, 0.4) 50%, transparent 70%);
            border-radius: 50%;
            position: absolute;
            pointer-events: none;
            z-index: 100;
            transform: translate(-50%, -50%);
            transition: left 0.5s ease-in-out, top 0.5s ease-in-out, opacity 0.3s ease;
        }

        .phone-cursor::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 8px;
            height: 8px;
            background: #cfaf6a;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        .phone-cursor.clicking {
            animation: cursorClick 0.3s ease-out;
        }

        @keyframes cursorClick {
            0% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(0.7); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        .typing-cursor {
            display: inline-block;
            width: 2px;
            height: 1em;
            background: #cfaf6a;
            margin-left: 2px;
            animation: blink 0.7s infinite;
            vertical-align: middle;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        /* Screen transition styles */
        .phone-screen {
            position: absolute;
            top: 32px;
            left: 0;
            width: 100%;
            height: calc(100% - 32px);
            background: white;
            opacity: 0;
            transform: translateX(30px);
            transition: opacity 0.4s ease, transform 0.4s ease;
            pointer-events: none;
        }

        .phone-screen.active {
            opacity: 1;
            transform: translateX(0);
            pointer-events: auto;
        }

        .phone-screen.exiting {
            opacity: 0;
            transform: translateX(-30px);
        }

        /* Field highlight */
        .field-active {
            box-shadow: 0 0 0 2px rgba(8, 145, 178, 0.4) !important;
            border-color: #cfaf6a !important;
        }

        /* Service option selected */
        .service-selected {
            border-color: #cfaf6a !important;
            background: #f0f9ff !important;
        }

        .service-selected .radio-circle {
            background: #cfaf6a !important;
            border-color: #cfaf6a !important;
        }

        /* Calendar day selected */
        .day-selected {
            background: #cfaf6a !important;
            color: white !important;
        }

        /* Time slot selected */
        .time-selected {
            background: #cfaf6a !important;
            color: white !important;
            border-color: #cfaf6a !important;
        }

        /* Progress step active */
        .progress-active {
            background-color: #cfaf6a !important;
        }

        /* Confirmation icon animation */
        .confirm-icon {
            opacity: 0;
            transform: scale(0.5);
            transition: opacity 0.5s ease, transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .confirm-icon.show {
            opacity: 1;
            transform: scale(1);
        }
    </style>

    <script type="text/babel">
        // React-based Mobile App Animation Component
        const { useState, useEffect, useRef, useCallback } = React;

        // Simple Icon component that works with Lucide
        function Icon({ name, className = "" }) {
            const ref = useRef(null);

            useEffect(() => {
                if (ref.current && window.lucide) {
                    ref.current.innerHTML = '';
                    const iconEl = document.createElement('i');
                    iconEl.setAttribute('data-lucide', name);
                    iconEl.className = className;
                    ref.current.appendChild(iconEl);
                    lucide.createIcons({ nodes: [iconEl] });
                }
            }, [name, className]);

            return <span ref={ref} className="inline-flex items-center justify-center"></span>;
        }

        // Progress Bar Component
        function ProgressBar({ currentStep }) {
            return (
                <div className="mt-4 flex gap-2">
                    {[1, 2, 3, 4].map(step => (
                        <div
                            key={step}
                            className={`h-1.5 flex-1 rounded-full transition-colors duration-300 ${
                                step <= currentStep ? 'bg-council-600' : 'bg-slate-200'
                            }`}
                        />
                    ))}
                </div>
            );
        }

        // Header Component
        function Header({ currentStep }) {
            return (
                <div className="bg-white border-b border-slate-200 px-6 py-4">
                    <div className="flex items-center gap-3">
                        <img src="cpc-logo.png" alt="Charlton Pest Control" className="w-10 h-10" />
                        <div>
                            <div className="font-bold text-slate-900 text-sm">Charlton Pest Control</div>
                            <div className="text-[9px] uppercase tracking-wider text-slate-500">Book Online</div>
                        </div>
                    </div>
                    <ProgressBar currentStep={currentStep} />
                </div>
            );
        }

        // Screen 1: Details Form
        function DetailsScreen({ formData, activeField, isTyping }) {
            return (
                <div className="p-6 overflow-hidden h-[calc(100%-180px)]">
                    <div className="text-[10px] font-bold uppercase tracking-wider text-slate-500 mb-2">Step 1 of 4</div>
                    <h2 className="text-xl font-bold text-slate-900 mb-2">Your Details</h2>
                    <p className="text-sm text-slate-600 mb-4">Tell us about yourself</p>

                    <div className="space-y-3">
                        <div className="bg-slate-50 border border-slate-200 rounded p-3">
                            <label className="block text-[10px] font-bold uppercase tracking-wider text-slate-500 mb-1">Full Name</label>
                            <div className={`flex items-center gap-2 bg-white border border-slate-300 rounded px-3 py-2 transition-all duration-200 ${activeField === 'name' ? 'field-active' : ''}`}>
                                <Icon name="user" className="w-4 h-4 text-slate-400" />
                                <span className={`text-sm ${formData.name ? 'text-slate-900' : 'text-slate-400'}`}>
                                    {formData.name || 'Enter your name...'}
                                    {activeField === 'name' && isTyping && <span className="typing-cursor"></span>}
                                </span>
                            </div>
                        </div>

                        <div className="bg-slate-50 border border-slate-200 rounded p-3">
                            <label className="block text-[10px] font-bold uppercase tracking-wider text-slate-500 mb-1">Postcode</label>
                            <div className={`flex items-center gap-2 bg-white border border-slate-300 rounded px-3 py-2 transition-all duration-200 ${activeField === 'postcode' ? 'field-active' : ''}`}>
                                <Icon name="map-pin" className="w-4 h-4 text-slate-400" />
                                <span className={`text-sm ${formData.postcode ? 'text-slate-900' : 'text-slate-400'}`}>
                                    {formData.postcode || 'Enter postcode...'}
                                    {activeField === 'postcode' && isTyping && <span className="typing-cursor"></span>}
                                </span>
                            </div>
                        </div>

                        <div className="bg-slate-50 border border-slate-200 rounded p-3">
                            <label className="block text-[10px] font-bold uppercase tracking-wider text-slate-500 mb-1">Address</label>
                            <div className={`flex items-center gap-2 bg-white border border-slate-300 rounded px-3 py-2 transition-all duration-200 ${activeField === 'address' ? 'field-active' : ''}`}>
                                <Icon name="home" className="w-4 h-4 text-slate-400" />
                                <span className={`text-sm ${formData.address ? 'text-slate-900' : 'text-slate-400'}`}>
                                    {formData.address || 'Enter address...'}
                                    {activeField === 'address' && isTyping && <span className="typing-cursor"></span>}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // Screen 2: Service Selection
        function ServiceScreen({ selectedService }) {
            const services = [
                { id: 'rodents', icon: 'rat', title: 'Rodents', subtitle: 'Rats, Mice' },
                { id: 'insects', icon: 'bug', title: 'Insects', subtitle: 'Wasps, Ants, Bed Bugs' },
                { id: 'other', icon: 'help-circle', title: 'Other', subtitle: 'Unknown / Other' }
            ];

            return (
                <div className="p-6 overflow-hidden h-[calc(100%-180px)]">
                    <div className="text-[10px] font-bold uppercase tracking-wider text-slate-500 mb-2">Step 2 of 4</div>
                    <h2 className="text-xl font-bold text-slate-900 mb-2">Select Service</h2>
                    <p className="text-sm text-slate-600 mb-4">What pest issue do you have?</p>

                    <div className="space-y-3">
                        {services.map(service => (
                            <div
                                key={service.id}
                                className={`bg-white border-2 border-slate-200 rounded-lg p-4 flex items-center gap-3 cursor-pointer transition-all duration-200 ${selectedService === service.id ? 'service-selected' : ''}`}
                            >
                                <div className="w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center">
                                    <Icon name={service.icon} className="w-5 h-5 text-slate-600" />
                                </div>
                                <div className="flex-1">
                                    <div className="font-bold text-slate-900 text-sm">{service.title}</div>
                                    <div className="text-xs text-slate-500">{service.subtitle}</div>
                                </div>
                                <div className={`radio-circle w-5 h-5 rounded-full border-2 border-slate-300 transition-all duration-200 ${selectedService === service.id ? '' : ''}`}></div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        // Screen 3: Date/Time Selection
        function DateTimeScreen({ selectedDate, selectedTime }) {
            const days = [
                { day: 27, disabled: true }, { day: 28, disabled: true }, { day: 29, disabled: true },
                { day: 30, disabled: true }, { day: 31, disabled: true }, { day: 1, disabled: false },
                { day: 2, disabled: false }, { day: 3, disabled: false }, { day: 4, disabled: false },
                { day: 5, disabled: false }, { day: 6, disabled: false }, { day: 7, disabled: false },
                { day: 8, disabled: true }, { day: 9, disabled: true }, { day: 10, disabled: false },
                { day: 11, disabled: false }, { day: 12, disabled: false }, { day: 13, disabled: false },
                { day: 14, disabled: false }, { day: 15, disabled: true }, { day: 16, disabled: true }
            ];

            const times = [
                { id: '9', label: '9:00 AM', available: true },
                { id: '10', label: '10:00 AM', available: true },
                { id: '11', label: '11:00 AM', available: true },
                { id: '14', label: '2:00 PM', available: false },
                { id: '15', label: '3:00 PM', available: true },
                { id: '16', label: '4:00 PM', available: true }
            ];

            return (
                <div className="p-4 overflow-hidden h-[calc(100%-180px)]">
                    <div className="text-[10px] font-bold uppercase tracking-wider text-slate-500 mb-2">Step 3 of 4</div>
                    <h2 className="text-xl font-bold text-slate-900 mb-2">Pick a Date</h2>
                    <p className="text-sm text-slate-600 mb-3">Choose your preferred time</p>

                    <div className="bg-slate-50 rounded-lg p-3 mb-3">
                        <div className="flex justify-between items-center mb-3">
                            <span className="font-bold text-slate-900 text-sm">February 2026</span>
                            <div className="flex gap-1">
                                <div className="w-6 h-6 rounded bg-white border border-slate-200 flex items-center justify-center">
                                    <Icon name="chevron-left" className="w-3 h-3 text-slate-600" />
                                </div>
                                <div className="w-6 h-6 rounded bg-white border border-slate-200 flex items-center justify-center">
                                    <Icon name="chevron-right" className="w-3 h-3 text-slate-600" />
                                </div>
                            </div>
                        </div>
                        <div className="grid grid-cols-7 gap-1 text-center text-[10px]">
                            {['M', 'T', 'W', 'T', 'F', 'S', 'S'].map((d, i) => (
                                <div key={i} className="text-slate-400 py-1">{d}</div>
                            ))}
                            {days.map((d, i) => (
                                <div
                                    key={i}
                                    className={`py-1 rounded transition-all duration-200 ${
                                        d.disabled ? 'text-slate-300' :
                                        selectedDate === d.day ? 'day-selected' : 'text-slate-900'
                                    }`}
                                >
                                    {d.day}
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="text-[10px] font-bold uppercase tracking-wider text-slate-500 mb-2">Available Times</div>
                    <div className="grid grid-cols-3 gap-2">
                        {times.map(time => (
                            <div
                                key={time.id}
                                className={`border rounded py-2 text-center text-xs font-medium transition-all duration-200 ${
                                    !time.available ? 'bg-slate-100 border-slate-200 text-slate-400' :
                                    selectedTime === time.id ? 'time-selected' : 'bg-white border-slate-200 text-slate-700'
                                }`}
                            >
                                {time.label}
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        // Screen 4: Confirmation
        function ConfirmationScreen({ showIcon }) {
            return (
                <div className="p-6 overflow-hidden h-[calc(100%-180px)]">
                    <div className="text-center mb-4">
                        <div className={`confirm-icon w-16 h-16 rounded-full bg-sage-100 flex items-center justify-center mx-auto mb-3 ${showIcon ? 'show' : ''}`}>
                            <Icon name="check-circle" className="w-8 h-8 text-sage-700" />
                        </div>
                        <h2 className="text-xl font-bold text-slate-900 mb-1">Booking Confirmed!</h2>
                        <p className="text-sm text-slate-600">Reference: #CPC-2026-0142</p>
                    </div>

                    <div className="bg-slate-50 rounded-lg p-4 space-y-3">
                        <div className="flex items-center gap-3">
                            <Icon name="user" className="w-4 h-4 text-council-600" />
                            <div>
                                <div className="text-[10px] text-slate-500 uppercase">Name</div>
                                <div className="text-sm font-medium text-slate-900">Sarah Thompson</div>
                            </div>
                        </div>
                        <div className="flex items-center gap-3">
                            <Icon name="map-pin" className="w-4 h-4 text-council-600" />
                            <div>
                                <div className="text-[10px] text-slate-500 uppercase">Address</div>
                                <div className="text-sm font-medium text-slate-900">42 Woolwich Rd, SE7 8LQ</div>
                            </div>
                        </div>
                        <div className="flex items-center gap-3">
                            <Icon name="bug" className="w-4 h-4 text-council-600" />
                            <div>
                                <div className="text-[10px] text-slate-500 uppercase">Service</div>
                                <div className="text-sm font-medium text-slate-900">Insects (Wasps, Ants)</div>
                            </div>
                        </div>
                        <div className="flex items-center gap-3">
                            <Icon name="calendar" className="w-4 h-4 text-council-600" />
                            <div>
                                <div className="text-[10px] text-slate-500 uppercase">Appointment</div>
                                <div className="text-sm font-medium text-slate-900">Thu 5 Feb, 10:00 AM</div>
                            </div>
                        </div>
                    </div>

                    <p className="text-xs text-slate-500 text-center mt-4">A confirmation email has been sent to your address.</p>
                </div>
            );
        }

        // Continue Button Component
        function ContinueButton({ step, isHighlighted }) {
            const isConfirmation = step === 4;

            return (
                <div className="absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-white via-white to-transparent">
                    <button
                        className={`w-full font-bold py-3 rounded flex items-center justify-center gap-2 shadow-lg text-sm transition-transform duration-100 ${
                            isConfirmation ? 'bg-sage-700 text-white' : 'bg-council-800 text-white'
                        } ${isHighlighted ? 'scale-95' : 'scale-100'}`}
                    >
                        {isConfirmation ? (
                            <>
                                <Icon name="check" className="w-4 h-4" />
                                Done
                            </>
                        ) : (
                            <>
                                Continue
                                <Icon name="arrow-right" className="w-4 h-4" />
                            </>
                        )}
                    </button>
                </div>
            );
        }

        // Main Phone Animation Component
        function PhoneAnimation() {
            const [currentStep, setCurrentStep] = useState(1);
            const [animationPhase, setAnimationPhase] = useState('idle');
            const [formData, setFormData] = useState({ name: '', postcode: '', address: '' });
            const [activeField, setActiveField] = useState(null);
            const [isTyping, setIsTyping] = useState(false);
            const [selectedService, setSelectedService] = useState(null);
            const [selectedDate, setSelectedDate] = useState(null);
            const [selectedTime, setSelectedTime] = useState(null);
            const [showConfirmIcon, setShowConfirmIcon] = useState(false);
            const [cursorPos, setCursorPos] = useState({ x: 140, y: 200 });
            const [cursorVisible, setCursorVisible] = useState(false);
            const [buttonHighlighted, setButtonHighlighted] = useState(false);
            const [isClicking, setIsClicking] = useState(false);
            const [exitingStep, setExitingStep] = useState(null);

            const animationRef = useRef(null);
            const phoneRef = useRef(null);

            // Type text character by character
            const typeText = useCallback((field, text, callback) => {
                setActiveField(field);
                setIsTyping(true);
                let i = 0;
                const interval = setInterval(() => {
                    if (i < text.length) {
                        setFormData(prev => ({
                            ...prev,
                            [field]: text.substring(0, i + 1)
                        }));
                        i++;
                    } else {
                        clearInterval(interval);
                        setIsTyping(false);
                        if (callback) setTimeout(callback, 300);
                    }
                }, 80);
            }, []);

            // Move cursor to a position
            const moveCursor = useCallback((x, y, callback) => {
                setCursorPos({ x, y });
                if (callback) setTimeout(callback, 600);
            }, []);

            // Click animation
            const click = useCallback((callback) => {
                setIsClicking(true);
                setTimeout(() => {
                    setIsClicking(false);
                    if (callback) setTimeout(callback, 200);
                }, 300);
            }, []);

            // Transition to next step
            const transitionToStep = useCallback((nextStep) => {
                setExitingStep(currentStep);
                setTimeout(() => {
                    setCurrentStep(nextStep);
                    setExitingStep(null);
                }, 400);
            }, [currentStep]);

            // Reset animation state
            const resetAnimation = useCallback(() => {
                setCurrentStep(1);
                setFormData({ name: '', postcode: '', address: '' });
                setActiveField(null);
                setIsTyping(false);
                setSelectedService(null);
                setSelectedDate(null);
                setSelectedTime(null);
                setShowConfirmIcon(false);
                setCursorPos({ x: 140, y: 200 });
                setCursorVisible(false);
                setButtonHighlighted(false);
                setExitingStep(null);
            }, []);

            // Main animation sequence - runs continuously without pauses
            const runAnimation = useCallback(() => {
                // Clear any existing animation timeouts
                if (animationRef.current) {
                    clearTimeout(animationRef.current);
                }

                // Define the animation steps with their delays
                // Each step is [action, delayAfter]
                const steps = [
                    // === STEP 1: Fill form ===
                    [() => {
                        // Reset state for new loop
                        setCurrentStep(1);
                        setFormData({ name: '', postcode: '', address: '' });
                        setActiveField(null);
                        setSelectedService(null);
                        setSelectedDate(null);
                        setSelectedTime(null);
                        setButtonHighlighted(false);
                        setExitingStep(null);
                        setCursorPos({ x: 140, y: 200 });
                        setCursorVisible(false);
                    }, 400],

                    // Move to name field and type
                    [() => setCursorPos({ x: 140, y: 180 }), 500],
                    [() => {
                        setIsClicking(true);
                        setTimeout(() => setIsClicking(false), 150);
                        setActiveField('name');
                    }, 300],
                    [() => {
                        let i = 0;
                        const text = 'Sarah Thompson';
                        const interval = setInterval(() => {
                            if (i < text.length) {
                                setFormData(prev => ({ ...prev, name: text.substring(0, i + 1) }));
                                i++;
                            } else {
                                clearInterval(interval);
                            }
                        }, 70);
                    }, 1100],

                    // Move to postcode and type
                    [() => setCursorPos({ x: 140, y: 250 }), 500],
                    [() => {
                        setIsClicking(true);
                        setTimeout(() => setIsClicking(false), 150);
                        setActiveField('postcode');
                    }, 300],
                    [() => {
                        let i = 0;
                        const text = 'SE7 8LQ';
                        const interval = setInterval(() => {
                            if (i < text.length) {
                                setFormData(prev => ({ ...prev, postcode: text.substring(0, i + 1) }));
                                i++;
                            } else {
                                clearInterval(interval);
                            }
                        }, 70);
                    }, 600],

                    // Move to address and type
                    [() => setCursorPos({ x: 140, y: 320 }), 500],
                    [() => {
                        setIsClicking(true);
                        setTimeout(() => setIsClicking(false), 150);
                        setActiveField('address');
                    }, 300],
                    [() => {
                        let i = 0;
                        const text = '42 Woolwich Road';
                        const interval = setInterval(() => {
                            if (i < text.length) {
                                setFormData(prev => ({ ...prev, address: text.substring(0, i + 1) }));
                                i++;
                            } else {
                                clearInterval(interval);
                            }
                        }, 70);
                    }, 1200],

                    // Clear field and move to button
                    [() => setActiveField(null), 200],
                    [() => setCursorPos({ x: 140, y: 440 }), 500],
                    [() => setButtonHighlighted(true), 150],
                    [() => {
                        setIsClicking(true);
                        setTimeout(() => setIsClicking(false), 150);
                        setButtonHighlighted(false);
                        setExitingStep(1);
                        setTimeout(() => {
                            setCurrentStep(2);
                            setExitingStep(null);
                        }, 300);
                    }, 600],

                    // === STEP 2: Select service ===
                    [() => setCursorPos({ x: 140, y: 270 }), 500],
                    [() => {
                        setIsClicking(true);
                        setTimeout(() => setIsClicking(false), 150);
                        setSelectedService('insects');
                    }, 400],
                    [() => setCursorPos({ x: 140, y: 440 }), 500],
                    [() => setButtonHighlighted(true), 150],
                    [() => {
                        setIsClicking(true);
                        setTimeout(() => setIsClicking(false), 150);
                        setButtonHighlighted(false);
                        setExitingStep(2);
                        setTimeout(() => {
                            setCurrentStep(3);
                            setExitingStep(null);
                        }, 300);
                    }, 600],

                    // === STEP 3: Select date/time ===
                    [() => setCursorPos({ x: 145, y: 250 }), 500],
                    [() => {
                        setIsClicking(true);
                        setTimeout(() => setIsClicking(false), 150);
                        setSelectedDate(5);
                    }, 400],
                    [() => setCursorPos({ x: 140, y: 365 }), 500],
                    [() => {
                        setIsClicking(true);
                        setTimeout(() => setIsClicking(false), 150);
                        setSelectedTime('10');
                    }, 400],
                    [() => setCursorPos({ x: 140, y: 440 }), 500],
                    [() => setButtonHighlighted(true), 150],
                    [() => {
                        setIsClicking(true);
                        setTimeout(() => setIsClicking(false), 150);
                        setButtonHighlighted(false);
                        setExitingStep(3);
                    }, 800],

                    // Brief pause before loop restart (cursor stays visible)
                    [() => {}, 400]
                ];

                let currentStepIndex = 0;

                const executeStep = () => {
                    if (currentStepIndex < steps.length) {
                        const [action, delay] = steps[currentStepIndex];
                        action();
                        currentStepIndex++;
                        animationRef.current = setTimeout(executeStep, delay);
                    } else {
                        // Loop: restart from beginning
                        currentStepIndex = 0;
                        animationRef.current = setTimeout(executeStep, 100);
                    }
                };

                // Start the animation
                executeStep();
            }, []);

            // Start animation when component mounts
            useEffect(() => {
                let animationStarted = false;

                const startAnimation = () => {
                    if (!animationStarted) {
                        animationStarted = true;
                        runAnimation();
                    }
                };

                // Listen for the custom event from GSAP when phone container is ready
                const handlePhoneReady = () => {
                    startAnimation();
                };

                window.addEventListener('phoneContainerReady', handlePhoneReady);

                // Fallback: start after 7 seconds (increased from 5s to account for full animation)
                const fallbackTimeout = setTimeout(() => {
                    startAnimation();
                }, 7000);

                return () => {
                    window.removeEventListener('phoneContainerReady', handlePhoneReady);
                    clearTimeout(fallbackTimeout);
                    if (animationRef.current) clearTimeout(animationRef.current);
                };
            }, [runAnimation]);

            return (
                <div
                    ref={phoneRef}
                    className="relative w-full max-w-[280px] md:max-w-[320px] h-[500px] md:h-[580px] bg-white rounded-[32px] md:rounded-[40px] border-[8px] md:border-[10px] border-slate-900 shadow-2xl overflow-hidden mx-auto"
                >
                    {/* Cursor */}
                    <div
                        className={`phone-cursor ${isClicking ? 'clicking' : ''}`}
                        style={{
                            left: cursorPos.x,
                            top: cursorPos.y,
                            opacity: cursorVisible ? 1 : 0
                        }}
                    />

                    {/* Status bar */}
                    <div className="h-8 w-full flex items-center justify-between px-6 pt-2 text-[11px] text-slate-800 bg-white relative z-50">
                        <span className="font-semibold">9:41</span>
                        <div className="flex items-center gap-1.5">
                            <div className="w-4 h-2.5 bg-slate-900 rounded-[2px]"></div>
                            <div className="w-3 h-2.5 bg-slate-700 rounded-[2px]"></div>
                            <div className="w-5 h-2.5 border border-slate-900 rounded-[3px] relative">
                                <div className="absolute inset-0.5 bg-slate-900 rounded-[2px]"></div>
                            </div>
                        </div>
                    </div>

                    {/* Screen 1: Details */}
                    <div className={`phone-screen ${currentStep === 1 && !exitingStep ? 'active' : ''} ${exitingStep === 1 ? 'exiting' : ''}`}>
                        <Header currentStep={currentStep} />
                        <DetailsScreen formData={formData} activeField={activeField} isTyping={isTyping} />
                        <ContinueButton step={1} isHighlighted={buttonHighlighted && currentStep === 1} />
                        <div className="absolute bottom-1 left-1/2 -translate-x-1/2">
                            <div className="h-1 w-24 bg-slate-300 rounded-full"></div>
                        </div>
                    </div>

                    {/* Screen 2: Service */}
                    <div className={`phone-screen ${currentStep === 2 && !exitingStep ? 'active' : ''} ${exitingStep === 2 ? 'exiting' : ''}`}>
                        <Header currentStep={currentStep} />
                        <ServiceScreen selectedService={selectedService} />
                        <ContinueButton step={2} isHighlighted={buttonHighlighted && currentStep === 2} />
                        <div className="absolute bottom-1 left-1/2 -translate-x-1/2">
                            <div className="h-1 w-24 bg-slate-300 rounded-full"></div>
                        </div>
                    </div>

                    {/* Screen 3: Date/Time */}
                    <div className={`phone-screen ${currentStep === 3 && !exitingStep ? 'active' : ''} ${exitingStep === 3 ? 'exiting' : ''}`}>
                        <Header currentStep={currentStep} />
                        <DateTimeScreen selectedDate={selectedDate} selectedTime={selectedTime} />
                        <ContinueButton step={3} isHighlighted={buttonHighlighted && currentStep === 3} />
                        <div className="absolute bottom-1 left-1/2 -translate-x-1/2">
                            <div className="h-1 w-24 bg-slate-300 rounded-full"></div>
                        </div>
                    </div>

                    {/* Screen 4: Confirmation */}
                    <div className={`phone-screen ${currentStep === 4 && !exitingStep ? 'active' : ''} ${exitingStep === 4 ? 'exiting' : ''}`}>
                        <Header currentStep={currentStep} />
                        <ConfirmationScreen showIcon={showConfirmIcon} />
                        <ContinueButton step={4} isHighlighted={buttonHighlighted && currentStep === 4} />
                        <div className="absolute bottom-1 left-1/2 -translate-x-1/2">
                            <div className="h-1 w-24 bg-slate-300 rounded-full"></div>
                        </div>
                    </div>
                </div>
            );
        }

        // Mount React app when DOM is ready
        function mountReactApp() {
            const root = document.getElementById('mobile-app-root');
            if (root) {
                const reactRoot = ReactDOM.createRoot(root);
                reactRoot.render(<PhoneAnimation />);
            }
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', mountReactApp);
        } else {
            // DOM already loaded, mount immediately
            mountReactApp();
        }
    </script>

    <!-- Neural Background Animation (Light Version for White Background) -->
    <script>
        (function() {
            const canvas = document.getElementById('neural-canvas');
            const section = document.getElementById('process-section');
            if (!canvas || !section) return;

            const ctx = canvas.getContext('2d');
            if (!ctx) return;

            // Configuration - Adapted for white background
            const config = {
                color: '#cfaf6a', // Brand color (gold)
                trailOpacity: 0.08, // Lower opacity for lighter trails on white
                particleCount: 600,
                speed: 1,
                particleOpacity: 0.6 // Slightly transparent particles for subtle effect
            };

            let width = section.clientWidth;
            let height = section.scrollHeight;
            let particles = [];
            let animationFrameId;
            let mouse = { x: -1000, y: -1000 };

            // Particle Class
            class Particle {
                constructor() {
                    this.x = Math.random() * width;
                    this.y = Math.random() * height;
                    this.vx = 0;
                    this.vy = 0;
                    this.age = 0;
                    this.life = Math.random() * 200 + 100;
                }

                update() {
                    // Flow field (creates organic movement patterns)
                    const angle = (Math.cos(this.x * 0.005) + Math.sin(this.y * 0.005)) * Math.PI;

                    this.vx += Math.cos(angle) * 0.2 * config.speed;
                    this.vy += Math.sin(angle) * 0.2 * config.speed;

                    // Mouse interaction
                    const dx = mouse.x - this.x;
                    const dy = mouse.y - this.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    const interactionRadius = 150;

                    if (distance < interactionRadius) {
                        const force = (interactionRadius - distance) / interactionRadius;
                        this.vx -= dx * force * 0.05;
                        this.vy -= dy * force * 0.05;
                    }

                    // Apply velocity and friction
                    this.x += this.vx;
                    this.y += this.vy;
                    this.vx *= 0.95;
                    this.vy *= 0.95;

                    // Aging
                    this.age++;
                    if (this.age > this.life) {
                        this.reset();
                    }

                    // Wrap around screen
                    if (this.x < 0) this.x = width;
                    if (this.x > width) this.x = 0;
                    if (this.y < 0) this.y = height;
                    if (this.y > height) this.y = 0;
                }

                reset() {
                    this.x = Math.random() * width;
                    this.y = Math.random() * height;
                    this.vx = 0;
                    this.vy = 0;
                    this.age = 0;
                    this.life = Math.random() * 200 + 100;
                }

                draw(context) {
                    context.fillStyle = config.color;
                    // Fade in and out based on age, with overall opacity adjustment
                    const lifeCycleAlpha = 1 - Math.abs((this.age / this.life) - 0.5) * 2;
                    context.globalAlpha = lifeCycleAlpha * config.particleOpacity;
                    context.fillRect(this.x, this.y, 1.5, 1.5);
                }
            }

            // Initialize
            function init() {
                const dpr = window.devicePixelRatio || 1;
                canvas.width = width * dpr;
                canvas.height = height * dpr;
                ctx.scale(dpr, dpr);
                canvas.style.width = `${width}px`;
                canvas.style.height = `${height}px`;

                particles = [];
                for (let i = 0; i < config.particleCount; i++) {
                    particles.push(new Particle());
                }
            }

            // Animation loop
            function animate() {
                // Create trail effect with WHITE overlay (for white background)
                ctx.fillStyle = `rgba(255, 255, 255, ${config.trailOpacity})`;
                ctx.fillRect(0, 0, width, height);

                particles.forEach(p => {
                    p.update();
                    p.draw(ctx);
                });

                animationFrameId = requestAnimationFrame(animate);
            }

            // Event listeners
            function handleResize() {
                width = section.clientWidth;
                height = section.scrollHeight;
                init();
            }

            function handleMouseMove(e) {
                const rect = canvas.getBoundingClientRect();
                mouse.x = e.clientX - rect.left;
                mouse.y = e.clientY - rect.top;
            }

            function handleMouseLeave() {
                mouse.x = -1000;
                mouse.y = -1000;
            }

            // Start
            init();
            animate();

            window.addEventListener('resize', handleResize);
            section.addEventListener('mousemove', handleMouseMove);
            section.addEventListener('mouseleave', handleMouseLeave);

            // Cleanup on page unload
            window.addEventListener('beforeunload', () => {
                window.removeEventListener('resize', handleResize);
                section.removeEventListener('mousemove', handleMouseMove);
                section.removeEventListener('mouseleave', handleMouseLeave);
                cancelAnimationFrame(animationFrameId);
            });
        })();
    </script>

</body>
</html>
